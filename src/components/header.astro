---
import Logo from "../assets/logo.svg?raw";
import Github from "../assets/github.svg?raw";
import Chart from "../assets/Chart.svg?raw";
import HeaderLink from "./header-link.astro";
import ThemeToggle from "./theme-toggle.astro";
import { website } from "@/website";

const navItems = [
  { year: 2020, href: "/2020" },
  { year: 2021, href: "/2021" },
  { year: 2022, href: "/2022" },
  { year: 2023, href: "/2023" },
  { label: "Playground", href: "/playground", icon: Chart },
  { label: "FAQ", href: "/faq" },
  { label: "Github", href: website.repoGithub, icon: Github, external: true }
];

const currentPath = Astro.url.pathname;
---

<header
  class="z-[99] relative bg-transparent max-w-screen-xl w-full px-4 py-4 text-foreground md:mx-auto border-b border-border"
>
  <div class="flex justify-between items-center">
    <a href="/" class="z-10" aria-label="state of dev logo">
      <div
        class="flex cursor-pointer items-center whitespace-nowrap text-2xl font-sans font-black"
      >
        <Fragment set:html={Logo} />
      </div>
    </a>

    <div class="md:hidden">
      <input type="checkbox" id="navbar-open" class="hidden peer" />
      <label
        for="navbar-open"
        class="cursor-pointer relative z-20 group peer-checked:fixed peer-checked:right-4 peer-checked:top-4"
        aria-label="Toggle Navigation"
      >
        <span class="sr-only">Toggle Navigation</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 group-[.peer:checked+&]:hidden"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 hidden group-[.peer:checked+&]:block"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </label>

      <nav
        aria-label="Header Navigation"
        class="fixed z-10 inset-0 bg-background bg-opacity-95 flex items-center justify-center transform transition-transform duration-300 ease-in-out translate-x-full peer-checked:translate-x-0"
      >
        <ul class="flex flex-col items-center space-y-6 text-lg">
          {
            navItems.map((item) => (
              <li>
                <HeaderLink
                  label={item.year?.toString() || item.label || ""}
                  href={item.href}
                  external={item.external}
                  isActive={currentPath === item.href}
                />
              </li>
            ))
          }
          <li>
            <ThemeToggle />
          </li>
        </ul>
      </nav>
    </div>

    <nav
      aria-label="Header Navigation"
      class="hidden md:flex md:flex-row md:items-center md:space-x-6"
    >
      <ul class="flex flex-row space-x-6">
        {
          navItems.map((item) => (
            <li>
              <HeaderLink
                label={item.year?.toString() || item.label || ""}
                href={item.href}
                external={item.external}
                isActive={currentPath === item.href}
              />
            </li>
          ))
        }
      </ul>
      <ThemeToggle />
    </nav>
  </div>
</header>
